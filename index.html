<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>3D Gameplay X â€“ Human Proportion Upgrade</title>
<style>
body{margin:0;overflow:hidden;}
canvas{display:block;}
</style>
</head>
<body>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
<script>
/* SCENE */
const scene=new THREE.Scene();
scene.background=new THREE.Color(0x87ceeb);

/* CAMERA */
const camera=new THREE.PerspectiveCamera(60,innerWidth/innerHeight,0.1,1000);
camera.position.set(0,5,8);

/* RENDERER */
const renderer=new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth,innerHeight);
renderer.shadowMap.enabled=true;
document.body.appendChild(renderer.domElement);

/* LIGHT */
scene.add(new THREE.AmbientLight(0xffffff,0.35));
const sun=new THREE.DirectionalLight(0xffffff,1.1);
sun.position.set(10,20,10);
sun.castShadow=true;
scene.add(sun);

/* GROUND */
const ground=new THREE.Mesh(
new THREE.PlaneGeometry(200,200),
new THREE.MeshStandardMaterial({color:0x3a9b3a})
);
ground.rotation.x=-Math.PI/2;
ground.receiveShadow=true;
scene.add(ground);

/* HUMAN ROOT */
const human=new THREE.Group();
scene.add(human);

/* MATERIAL */
const skin=new THREE.MeshStandardMaterial({
color:0xffc9a6,
roughness:0.35,
metalness:0.05
});

/* TORSO */
const pelvis=new THREE.Mesh(new THREE.CapsuleGeometry(0.28,0.35,8,16),skin);
pelvis.position.y=1.1;
human.add(pelvis);

const torso=new THREE.Mesh(new THREE.CapsuleGeometry(0.32,0.7,10,20),skin);
torso.position.y=1.8;
human.add(torso);

/* CHEST */
const chest=new THREE.Mesh(new THREE.CapsuleGeometry(0.34,0.35,8,16),skin);
chest.position.y=2.4;
human.add(chest);

/* NECK */
const neck=new THREE.Mesh(new THREE.CylinderGeometry(0.12,0.14,0.22,16),skin);
neck.position.y=2.9;
human.add(neck);

/* HEAD (LESS ROUND) */
const head=new THREE.Mesh(new THREE.SphereGeometry(0.28,32,32),skin);
head.scale.set(1,1.15,0.95);
head.position.y=3.25;
human.add(head);

/* FACE */
const jaw=new THREE.Mesh(new THREE.BoxGeometry(0.42,0.22,0.38),skin);
jaw.position.set(0,3.05,0.05);
human.add(jaw);

const nose=new THREE.Mesh(new THREE.ConeGeometry(0.06,0.18,16),skin);
nose.rotation.x=Math.PI/2;
nose.position.set(0,3.25,0.38);
human.add(nose);

const mouth=new THREE.Mesh(
new THREE.BoxGeometry(0.22,0.05,0.03),
new THREE.MeshStandardMaterial({color:0x9b3d3d})
);
mouth.position.set(0,3.1,0.35);
human.add(mouth);

const eyeMat=new THREE.MeshStandardMaterial({color:0x111111});
const eyeL=new THREE.Mesh(new THREE.SphereGeometry(0.035,16,16),eyeMat);
const eyeR=eyeL.clone();
eyeL.position.set(-0.09,3.32,0.27);
eyeR.position.set(0.09,3.32,0.27);
human.add(eyeL,eyeR);

/* SHOULDERS */
function shoulder(x){
const s=new THREE.Mesh(new THREE.SphereGeometry(0.14,16,16),skin);
s.position.set(x,2.55,0);
human.add(s);
}
shoulder(-0.55);
shoulder(0.55);

/* ARM */
function arm(side){
const g=new THREE.Group();
const upper=new THREE.Mesh(new THREE.CapsuleGeometry(0.09,0.45,8,16),skin);
upper.position.y=-0.25;
const elbow=new THREE.Mesh(new THREE.SphereGeometry(0.1,16,16),skin);
elbow.position.y=-0.55;
const lower=new THREE.Mesh(new THREE.CapsuleGeometry(0.08,0.42,8,16),skin);
lower.position.y=-0.9;
const palm=new THREE.Mesh(new THREE.BoxGeometry(0.22,0.1,0.28),skin);
palm.position.y=-1.25;
g.add(upper,elbow,lower,palm);
for(let i=0;i<5;i++){
const f=new THREE.Mesh(new THREE.CapsuleGeometry(0.025,0.18,6,8),skin);
f.position.set(-0.08+i*0.04,-1.4,0.15);
g.add(f);
}
g.position.set(side*0.6,2.45,0);
human.add(g);
return g;
}
const leftHand=arm(-1);
const rightHand=arm(1);

/* LEG */
function leg(side){
const g=new THREE.Group();
const thigh=new THREE.Mesh(new THREE.CapsuleGeometry(0.13,0.55,10,16),skin);
thigh.position.y=-0.3;
const knee=new THREE.Mesh(new THREE.SphereGeometry(0.12,16,16),skin);
knee.position.y=-0.7;
const calf=new THREE.Mesh(new THREE.CapsuleGeometry(0.11,0.55,10,16),skin);
calf.position.y=-1.1;
const foot=new THREE.Mesh(new THREE.BoxGeometry(0.28,0.1,0.42),skin);
foot.position.set(0,-1.45,0.15);
g.add(thigh,knee,calf,foot);
for(let i=0;i<5;i++){
const toe=new THREE.Mesh(new THREE.CapsuleGeometry(0.02,0.08,6,8),skin);
toe.position.set(-0.1+i*0.05,-1.5,0.35);
g.add(toe);
}
g.position.set(side*0.22,1.05,0);
human.add(g);
}
leg(-1);
leg(1);

/* PHYSICS */
let vY=0;
const gForce=-0.016;

/* SOUND */
const listener=new THREE.AudioListener();
camera.add(listener);
const step=new THREE.Audio(listener);
new THREE.AudioLoader().load(
"https://cdn.jsdelivr.net/gh/mdn/webaudio-examples/audio-buffer/trumpet.mp3",
b=>{step.setBuffer(b);step.setVolume(0.08);}
);

/* ANIMATE */
function animate(){
requestAnimationFrame(animate);
leftHand.rotation.x=Math.sin(Date.now()*0.003)*0.35;
rightHand.rotation.x=-Math.sin(Date.now()*0.003)*0.35;
vY+=gForce;
human.position.y+=vY;
if(human.position.y<=0){
human.position.y=0;
vY=0;
if(!step.isPlaying)step.play();
}
camera.lookAt(human.position.clone().add(new THREE.Vector3(0,1.8,0)));
renderer.render(scene,camera);
}
animate();

/* RESIZE */
addEventListener("resize",()=>{
camera.aspect=innerWidth/innerHeight;
camera.updateProjectionMatrix();
renderer.setSize(innerWidth,innerHeight);
});
</script>
</body>
</html>
